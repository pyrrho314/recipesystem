

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A Complete List of Available Descriptors &mdash; Descriptors 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Descriptors 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Descriptors 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-complete-list-of-available-descriptors">
<span id="appendix-typewalk"></span><h1>A Complete List of Available Descriptors<a class="headerlink" href="#a-complete-list-of-available-descriptors" title="Permalink to this headline">Â¶</a></h1>
<p>Descriptors are designed such that essential keyword values that describe a
particular concept can be accessed from the headers of a given dataset in a
consistent manner, regardless of which instrument was used to obtain the
data. This is particularly useful for Gemini data, since the majority of
keywords used to describe a particular concept at Gemini are not uniform
between the instruments.</p>
<p><tt class="docutils literal"><span class="pre">airmass</span></tt></p>
<ul class="simple">
<li>the mean airmass of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">amp_read_area</span></tt></p>
<ul class="simple">
<li>the composite string containing the name of the detector amplifier (ampname)
and the readout area of the CCD (detsec) used for the observation.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">azimuth</span></tt></p>
<ul class="simple">
<li>the azimuth (in degrees between 0 and 360) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">camera</span></tt></p>
<ul class="simple">
<li>the camera used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">cass_rotator_pa</span></tt></p>
<ul class="simple">
<li>the cassegrain rotator position angle (in degrees between -360 and 360) of
the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">central_wavelength</span></tt></p>
<ul class="simple">
<li>the central wavelength (in meters as default) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">coadds</span></tt></p>
<ul class="simple">
<li>the number of coadds used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">data_label</span></tt></p>
<ul class="simple">
<li>the data label of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">data_section</span></tt></p>
<ul class="simple">
<li>the section of the data of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">dec</span></tt></p>
<ul class="simple">
<li>the declination (in decimal degrees) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">decker</span></tt></p>
<ul class="simple">
<li>the decker position used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">detector_section</span></tt></p>
<ul class="simple">
<li>the detector section of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">detector_x_bin</span></tt></p>
<ul class="simple">
<li>the binning of the x-axis of the detector used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">detector_y_bin</span></tt></p>
<ul class="simple">
<li>the binning of the y-axis of the detector used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">disperser</span></tt></p>
<ul class="simple">
<li>the disperser used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">dispersion</span></tt></p>
<ul class="simple">
<li>the dispersion (in meters per pixel as default) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">dispersion_axis</span></tt></p>
<ul class="simple">
<li>the dispersion axis (x = 1; y = 2; z = 3) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">elevation</span></tt></p>
<ul class="simple">
<li>the elevation (in degrees) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">exposure_time</span></tt></p>
<ul class="simple">
<li>the total exposure time (in seconds) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">filter_name</span></tt></p>
<ul class="simple">
<li>the unique, sorted filter name idenifier string used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">focal_plane_mask</span></tt></p>
<ul class="simple">
<li>the focal plane mask used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">gain</span></tt></p>
<ul class="simple">
<li>the gain (in electrons per ADU) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">gain_setting</span></tt></p>
<ul class="simple">
<li>the gain setting of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">grating</span></tt></p>
<ul class="simple">
<li>the grating used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">group_id</span></tt></p>
<ul class="simple">
<li>the group_id</li>
</ul>
<p><tt class="docutils literal"><span class="pre">instrument</span></tt></p>
<ul class="simple">
<li>the instrument used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">local_time</span></tt></p>
<ul class="simple">
<li>the local time (in HH:MM:SS.S) at the start of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">mdf_row_id</span></tt></p>
<ul class="simple">
<li>the corresponding reference row in the MDF</li>
</ul>
<p><tt class="docutils literal"><span class="pre">nod_count</span></tt></p>
<ul class="simple">
<li>the number of nod and shuffle cycles in the nod and shuffle observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">nod_pixels</span></tt></p>
<ul class="simple">
<li>the number of pixel rows the charge is shuffled by in the nod and shuffle
observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">non_linear_level</span></tt></p>
<ul class="simple">
<li>the non linear level in the raw images (in ADU) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">object</span></tt></p>
<ul class="simple">
<li>the name of the target object observed</li>
</ul>
<p><tt class="docutils literal"><span class="pre">observation_class</span></tt></p>
<ul class="simple">
<li>the class (either &#8216;science&#8217;, &#8216;progCal&#8217;, &#8216;partnerCal&#8217;, &#8216;acq&#8217;, &#8216;acqCal&#8217; or
&#8216;dayCal&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">observation_epoch</span></tt></p>
<ul class="simple">
<li>the epoch (in years) at the start of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">observation_id</span></tt></p>
<ul class="simple">
<li>the ID (e.g., GN-2011A-Q-123-45) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">observation_type</span></tt></p>
<ul class="simple">
<li>the type (either &#8216;OBJECT&#8217;, &#8216;DARK&#8217;, &#8216;FLAT&#8217;, &#8216;ARC&#8217;, &#8216;BIAS&#8217; or &#8216;MASK&#8217;) of the
observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">overscan_section</span></tt></p>
<ul class="simple">
<li>the overscan_section</li>
</ul>
<p><tt class="docutils literal"><span class="pre">pixel_scale</span></tt></p>
<ul class="simple">
<li>the pixel scale (in arcsec per pixel) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">prism</span></tt></p>
<ul class="simple">
<li>the prism used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">program_id</span></tt></p>
<ul class="simple">
<li>the Gemini program ID (e.g., GN-2011A-Q-123) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">pupil_mask</span></tt></p>
<ul class="simple">
<li>the pupil mask used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">qa_state</span></tt></p>
<ul class="simple">
<li>the quality assessment state (either &#8216;Undefined&#8217;, &#8216;Pass&#8217;, &#8216;Usable&#8217;, &#8216;Fail&#8217; or
&#8216;CHECK&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">ra</span></tt></p>
<ul class="simple">
<li>the Right Ascension (in decimal degrees) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">raw_bg</span></tt></p>
<ul class="simple">
<li>the raw background (either &#8216;20-percentile&#8217;, &#8216;50-percentile&#8217;, &#8216;80-percentile&#8217;
or &#8216;Any&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">raw_cc</span></tt></p>
<ul class="simple">
<li>the raw cloud cover (either &#8216;50-percentile&#8217;, &#8216;70-percentile&#8217;,
&#8216;80-percentile&#8217;, &#8216;90-percentile&#8217; or &#8216;Any&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">raw_iq</span></tt></p>
<ul class="simple">
<li>the raw image quality (either &#8216;20-percentile&#8217;, &#8216;70-percentile&#8217;,
&#8216;85-percentile&#8217; or &#8216;Any&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">raw_wv</span></tt></p>
<ul class="simple">
<li>the raw water vapour (either &#8216;20-percentile&#8217;, &#8216;50-percentile&#8217;,
&#8216;80-percentile&#8217; or &#8216;Any&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">read_mode</span></tt></p>
<ul class="simple">
<li>the read mode (either &#8216;Very Faint Object(s)&#8217;, &#8216;Faint Object(s)&#8217;, &#8216;Medium
Object&#8217;, &#8216;Bright Object(s)&#8217;, &#8216;Very Bright Object(s)&#8217;, &#8216;Low Background&#8217;,
&#8216;Medium Background&#8217;, &#8216;High Background&#8217; or &#8216;Invalid&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">read_noise</span></tt></p>
<ul class="simple">
<li>the estimated readout noise (in electrons) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">read_speed_setting</span></tt></p>
<ul class="simple">
<li>the read speed setting (either &#8216;fast&#8217; or &#8216;slow&#8217;) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">saturation_level</span></tt></p>
<ul class="simple">
<li>the saturation level in the raw images (in ADU) of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">slit</span></tt></p>
<ul class="simple">
<li>the slit used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">telescope</span></tt></p>
<ul class="simple">
<li>the telescope used for the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">ut_date</span></tt></p>
<ul class="simple">
<li>the UT date at the start of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">ut_datetime</span></tt></p>
<ul class="simple">
<li>the UT date and time at the start of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">ut_time</span></tt></p>
<ul class="simple">
<li>the UT time at the start of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">wavefront_sensor</span></tt></p>
<ul class="simple">
<li>the wavefront sensor (either &#8216;AOWFS&#8217;, &#8216;OIWFS&#8217;, &#8216;PWFS1&#8217;, &#8216;PWFS2&#8217;, some
combination in alphebetic order separated with an ampersand or None) used for
the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">wavelength_reference_pixel</span></tt></p>
<ul class="simple">
<li>the reference pixel of the central wavelength of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">well_depth_setting</span></tt></p>
<ul class="simple">
<li>the well depth setting (either &#8216;Shallow&#8217;, &#8216;Deep&#8217; or &#8216;Invalid&#8217;) of the
observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">x_offset</span></tt></p>
<ul class="simple">
<li>the x offset of the observation</li>
</ul>
<p><tt class="docutils literal"><span class="pre">y_offset</span></tt></p>
<ul class="simple">
<li>the y offset of the observation</li>
</ul>
</div>
<div class="section" id="mkcalculatorinterface-py">
<span id="appendix-mkci"></span><h1><tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt><a class="headerlink" href="#mkcalculatorinterface-py" title="Permalink to this headline">Â¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">descriptorDescriptionDict</span> <span class="kn">import</span> <span class="n">asDictArgDict</span>
<span class="kn">from</span> <span class="nn">descriptorDescriptionDict</span> <span class="kn">import</span> <span class="n">descriptorDescDict</span>
<span class="kn">from</span> <span class="nn">descriptorDescriptionDict</span> <span class="kn">import</span> <span class="n">detailedNameDict</span>
<span class="kn">from</span> <span class="nn">descriptorDescriptionDict</span> <span class="kn">import</span> <span class="n">stripIDArgDict</span>

<span class="k">class</span> <span class="nc">DescriptorDescriptor</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">pytype</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">thunkfuncbuff</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    def </span><span class="si">%(name)s</span><span class="s">(self, format=None, **args):</span>
<span class="s">        </span><span class="se">\&quot;\&quot;\&quot;</span><span class="s"></span>
<span class="s">        </span><span class="si">%(description)s</span><span class="s"></span>
<span class="s">        </span><span class="se">\&quot;\&quot;\&quot;</span><span class="s"></span>
<span class="s">        try:</span>
<span class="s">            self._lazyloadCalculator()</span>
<span class="s">            keydict = self.descriptor_calculator._specifickey_dict</span>
<span class="s">            #print hasattr(self.descriptor_calculator, &quot;</span><span class="si">%(name)s</span><span class="s">&quot;)</span>
<span class="s">            if not hasattr(self.descriptor_calculator, &quot;</span><span class="si">%(name)s</span><span class="s">&quot;):</span>
<span class="s">                key = &quot;key_&quot;+&quot;</span><span class="si">%(name)s</span><span class="s">&quot;</span>
<span class="s">                #print &quot;mkCI10:&quot;,key, repr(keydict)</span>
<span class="s">                #print &quot;mkCI12:&quot;, key in keydict</span>
<span class="s">                if key in keydict.keys():</span>
<span class="s">                    retval = self.phu_get_key_value(keydict[key])</span>
<span class="s">                    if retval is None:</span>
<span class="s">                        if hasattr(self, &quot;exception_info&quot;):</span>
<span class="s">                            raise self.exception_info</span>
<span class="s">                else:</span>
<span class="s">                    msg = &quot;Unable to find an appropriate descriptor function &quot;</span>
<span class="s">                    msg += &quot;or a default keyword for </span><span class="si">%(name)s</span><span class="s">&quot;</span>
<span class="s">                    raise KeyError(msg)</span>
<span class="s">            else:</span>
<span class="s">                retval = self.descriptor_calculator.</span><span class="si">%(name)s</span><span class="s">(self, **args)</span>

<span class="s">            </span><span class="si">%(pytypeimport)s</span><span class="s"></span>
<span class="s">            ret = DescriptorValue( retval,</span>
<span class="s">                                   format = format,</span>
<span class="s">                                   name = &quot;</span><span class="si">%(name)s</span><span class="s">&quot;,</span>
<span class="s">                                   ad = self,</span>
<span class="s">                                   pytype = </span><span class="si">%(pytype)s</span><span class="s"> )</span>
<span class="s">            return ret</span>
<span class="s">        except:</span>
<span class="s">            if not hasattr(self, &quot;exception_info&quot;):</span>
<span class="s">                setattr(self, &quot;exception_info&quot;, sys.exc_info()[1])</span>
<span class="s">            if (self.descriptor_calculator is None</span>
<span class="s">                or self.descriptor_calculator.throwExceptions == True):</span>
<span class="s">                raise</span>
<span class="s">            else:</span>
<span class="s">                #print &quot;NONE BY EXCEPTION&quot;</span>
<span class="s">                self.exception_info = sys.exc_info()[1]</span>
<span class="s">                return None</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">pytype</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pytype</span> <span class="o">=</span> <span class="n">pytype</span>
            <span class="n">rtype</span> <span class="o">=</span> <span class="n">pytype</span><span class="o">.</span><span class="n">__name__</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">descriptorDescDict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rtype</span> <span class="o">==</span> <span class="s">&#39;str&#39;</span><span class="p">:</span>
                <span class="n">rtype</span> <span class="o">=</span> <span class="s">&#39;string&#39;</span>
            <span class="k">if</span> <span class="n">rtype</span> <span class="o">==</span> <span class="s">&#39;int&#39;</span><span class="p">:</span>
                <span class="n">rtype</span> <span class="o">=</span> <span class="s">&#39;integer&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dname</span> <span class="o">=</span> <span class="n">detailedNameDict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">dname</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">asDictArg</span> <span class="o">=</span> <span class="n">asDictArgDict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">asDictArg</span> <span class="o">=</span> <span class="s">&#39;no&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">stripIDArg</span> <span class="o">=</span> <span class="n">stripIDArgDict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">stripIDArg</span> <span class="o">=</span> <span class="s">&#39;no&#39;</span>

            <span class="k">if</span> <span class="n">stripIDArg</span> <span class="o">==</span> <span class="s">&#39;yes&#39;</span><span class="p">:</span>
                <span class="n">desc</span> <span class="o">=</span> <span class="s">&#39;Return the </span><span class="si">%(name)s</span><span class="s"> value</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param dataset: the data set</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type dataset: AstroData</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param stripID: set to True to remove the &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;component ID from the </span><span class="se">\n</span><span class="s">                        &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;returned </span><span class="si">%(name)s</span><span class="s"> value</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type stripID: Python boolean</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param pretty: set to True to return a &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;human meaningful </span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;                       </span><span class="si">%(name)s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;value</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type pretty: Python boolean</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :rtype: </span><span class="si">%(rtype)s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;rtype&#39;</span><span class="p">:</span><span class="n">rtype</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;as default (i.e., format=None)</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :return: the </span><span class="si">%(dname)s</span><span class="s">&#39;</span> \
                       <span class="o">%</span> <span class="p">{</span><span class="s">&#39;dname&#39;</span><span class="p">:</span><span class="n">dname</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">asDictArg</span> <span class="o">==</span> <span class="s">&#39;yes&#39;</span><span class="p">:</span>
                <span class="n">desc</span> <span class="o">=</span> <span class="s">&#39;Return the </span><span class="si">%(name)s</span><span class="s"> value</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param dataset: the data set</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type dataset: AstroData</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param format: the return format</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;                       set to as_dict to return a &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;dictionary, where the number &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;</span><span class="se">\n</span><span class="s">                       of dictionary elements &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;equals the number of pixel data &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;</span><span class="se">\n</span><span class="s">                       extensions in the image. &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;The key of the dictionary is &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;</span><span class="se">\n</span><span class="s">                       an (EXTNAME, EXTVER) &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;tuple, if available. Otherwise, &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;</span><span class="se">\n</span><span class="s">                       the key is the integer &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;index of the extension.</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type format: string</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :rtype: </span><span class="si">%(rtype)s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;rtype&#39;</span><span class="p">:</span><span class="n">rtype</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;as default (i.e., format=None)</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :rtype: dictionary containing one or more &#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;</span><span class="si">%(rtype)s</span><span class="s">(s) &#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;rtype&#39;</span><span class="p">:</span><span class="n">rtype</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;(format=as_dict)</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :return: the </span><span class="si">%(dname)s</span><span class="s">&#39;</span> \
                       <span class="o">%</span> <span class="p">{</span><span class="s">&#39;dname&#39;</span><span class="p">:</span><span class="n">dname</span><span class="p">}</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">desc</span> <span class="o">=</span> <span class="s">&#39;Return the </span><span class="si">%(name)s</span><span class="s"> value</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="n">name</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param dataset: the data set</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type dataset: AstroData</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :param format: the return format</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :type format: string</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :rtype: </span><span class="si">%(rtype)s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;rtype&#39;</span><span class="p">:</span><span class="n">rtype</span><span class="p">}</span> <span class="o">+</span> \
                       <span class="s">&#39;as default (i.e., format=None)</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> \
                       <span class="s">&#39;        :return: the </span><span class="si">%(dname)s</span><span class="s">&#39;</span> \
                       <span class="o">%</span> <span class="p">{</span><span class="s">&#39;dname&#39;</span><span class="p">:</span><span class="n">dname</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">desc</span>

    <span class="k">def</span> <span class="nf">funcbody</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pytype</span><span class="p">:</span>
            <span class="n">pytypestr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pytype</span><span class="o">.</span><span class="n">__name__</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pytypestr</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span>
        <span class="k">if</span> <span class="n">pytypestr</span> <span class="o">==</span> <span class="s">&quot;datetime&quot;</span><span class="p">:</span>
            <span class="n">pti</span> <span class="o">=</span> <span class="s">&quot;from datetime import datetime&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pti</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="c">#print &quot;mkC150:&quot;, pti</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thunkfuncbuff</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                    <span class="s">&#39;pytypeimport&#39;</span><span class="p">:</span> <span class="n">pti</span><span class="p">,</span>
                                    <span class="s">&#39;pytype&#39;</span><span class="p">:</span> <span class="n">pytypestr</span><span class="p">,</span>
                                    <span class="s">&#39;description&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">ret</span>

<span class="n">DD</span> <span class="o">=</span> <span class="n">DescriptorDescriptor</span>

<span class="n">descriptors</span> <span class="o">=</span>   <span class="p">[</span>   <span class="n">DD</span><span class="p">(</span><span class="s">&quot;airmass&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;amp_read_area&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;azimuth&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;camera&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;cass_rotator_pa&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;central_wavelength&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;coadds&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;data_label&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;data_section&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">list</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;dec&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;decker&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;detector_section&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">list</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;detector_x_bin&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;detector_y_bin&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;disperser&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;dispersion&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;dispersion_axis&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;elevation&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;exposure_time&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;filter_name&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;focal_plane_mask&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;gain&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;grating&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;group_id&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;gain_setting&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;instrument&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;local_time&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;mdf_row_id&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;nod_count&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;nod_pixels&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;non_linear_level&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;object&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;observation_class&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;observation_epoch&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;observation_id&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;observation_type&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;overscan_section&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">list</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;pixel_scale&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;prism&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;program_id&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;pupil_mask&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;qa_state&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;ra&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;raw_bg&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;raw_cc&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;raw_iq&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;raw_wv&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;read_mode&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;read_noise&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;read_speed_setting&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;saturation_level&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">int</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;slit&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;telescope&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;ut_date&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="n">datetime</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;ut_datetime&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="n">datetime</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;ut_time&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="n">datetime</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;wavefront_sensor&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;wavelength_reference_pixel&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;well_depth_setting&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;x_offset&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                    <span class="n">DD</span><span class="p">(</span><span class="s">&quot;y_offset&quot;</span><span class="p">,</span> <span class="n">pytype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
                <span class="p">]</span>

<span class="n">wholeout</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;import sys</span>
<span class="s">from astrodata import Descriptors</span>
<span class="s">from astrodata.Descriptors import DescriptorValue</span>
<span class="s">from astrodata import Errors</span>

<span class="s">class CalculatorInterface:</span>

<span class="s">    descriptor_calculator = None</span>
<span class="si">%(descriptors)s</span><span class="s"></span>
<span class="s"># UTILITY FUNCTIONS, above are descriptor thunks</span>
<span class="s">    def _lazyloadCalculator(self, **args):</span>
<span class="s">        &#39;&#39;&#39;Function to put at top of all descriptor members</span>
<span class="s">        to ensure the descriptor is loaded.  This way we avoid</span>
<span class="s">        loading it if it is not needed.&#39;&#39;&#39;</span>
<span class="s">        if self.descriptor_calculator is None:</span>
<span class="s">            self.descriptor_calculator = Descriptors.get_calculator(self, **args)</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">out</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

<span class="k">for</span> <span class="n">dd</span> <span class="ow">in</span> <span class="n">descriptors</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">+=</span> <span class="n">dd</span><span class="o">.</span><span class="n">funcbody</span><span class="p">()</span>

<span class="n">finalout</span> <span class="o">=</span> <span class="n">wholeout</span> <span class="o">%</span> <span class="p">{</span><span class="s">&quot;descriptors&quot;</span><span class="p">:</span> <span class="n">out</span><span class="p">}</span>

<span class="k">print</span> <span class="n">finalout</span>
</pre></div>
</div>
</div>
<div class="section" id="an-example-function-from-calculatorinterface-py">
<span id="appendix-ci"></span><h1>An Example Function from <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt><a class="headerlink" href="#an-example-function-from-calculatorinterface-py" title="Permalink to this headline">Â¶</a></h1>
<p>The example function below is auto-generated by the
<tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt> file. The <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt> file should
never be edited directly.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">airmass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the airmass value</span>
<span class="sd">    :param dataset: the data set</span>
<span class="sd">    :type dataset: AstroData</span>
<span class="sd">    :param format: the return format</span>
<span class="sd">    :type format: string</span>
<span class="sd">    :rtype: float as default (i.e., format=None)</span>
<span class="sd">    :return: the mean airmass of the observation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lazyloadCalculator</span><span class="p">()</span>
        <span class="n">keydict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">descriptor_calculator</span><span class="o">.</span><span class="n">_specifickey_dict</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descriptor_calculator</span><span class="p">,</span> <span class="s">&quot;airmass&quot;</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s">&quot;key_&quot;</span><span class="o">+</span><span class="s">&quot;airmass&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keydict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">retval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phu_get_key_value</span><span class="p">(</span><span class="n">keydict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">retval</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;exception_info&quot;</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">exception_info</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Unable to find an appropriate descriptor function &quot;</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;or a default keyword for airmass&quot;</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">descriptor_calculator</span><span class="o">.</span><span class="n">airmass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>


        <span class="n">ret</span> <span class="o">=</span> <span class="n">DescriptorValue</span><span class="p">(</span> <span class="n">retval</span><span class="p">,</span>
                               <span class="n">format</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span>
                               <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;airmass&quot;</span><span class="p">,</span>
                               <span class="n">ad</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span>
                               <span class="n">pytype</span> <span class="o">=</span> <span class="nb">float</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descriptor_calculator</span> <span class="ow">is</span> <span class="bp">None</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">descriptor_calculator</span><span class="o">.</span><span class="n">throwExceptions</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c">#print &quot;NONE BY EXCEPTION&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exception_info</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">None</span>
</pre></div>
</div>
</div>
<div class="section" id="standarddescriptorkeydict-py">
<span id="appendix-sdkd"></span><h1><tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt><a class="headerlink" href="#standarddescriptorkeydict-py" title="Permalink to this headline">Â¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span class="n">globalStdkeyDict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;key_airmass&quot;</span><span class="p">:</span><span class="s">&quot;AIRMASS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_amp_read_area&quot;</span><span class="p">:</span><span class="s">&quot;AMPROA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_azimuth&quot;</span><span class="p">:</span><span class="s">&quot;AZIMUTH&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_camera&quot;</span><span class="p">:</span><span class="s">&quot;CAMERA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_cass_rotator_pa&quot;</span><span class="p">:</span><span class="s">&quot;CRPA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_central_wavelength&quot;</span><span class="p">:</span><span class="s">&quot;CWAVE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_coadds&quot;</span><span class="p">:</span><span class="s">&quot;COADDS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_data_label&quot;</span><span class="p">:</span><span class="s">&quot;DATALAB&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_data_section&quot;</span><span class="p">:</span><span class="s">&quot;DATASEC&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_dec&quot;</span><span class="p">:</span><span class="s">&quot;DEC&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_decker&quot;</span><span class="p">:</span><span class="s">&quot;DECKER&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_detector_section&quot;</span><span class="p">:</span><span class="s">&quot;DETSEC&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_detector_x_bin&quot;</span><span class="p">:</span><span class="s">&quot;XCCDBIN&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_detector_y_bin&quot;</span><span class="p">:</span><span class="s">&quot;YCCDBIN&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_disperser&quot;</span><span class="p">:</span><span class="s">&quot;DISPERSR&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_dispersion&quot;</span><span class="p">:</span><span class="s">&quot;WDELTA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_dispersion_axis&quot;</span><span class="p">:</span><span class="s">&quot;DISPAXIS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_elevation&quot;</span><span class="p">:</span><span class="s">&quot;ELEVATIO&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_exposure_time&quot;</span><span class="p">:</span><span class="s">&quot;EXPTIME&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_filter_name&quot;</span><span class="p">:</span><span class="s">&quot;FILTNAME&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_focal_plane_mask&quot;</span><span class="p">:</span><span class="s">&quot;FPMASK&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_gain&quot;</span><span class="p">:</span><span class="s">&quot;GAIN&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_gain_setting&quot;</span><span class="p">:</span><span class="s">&quot;GAINSET&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_grating&quot;</span><span class="p">:</span><span class="s">&quot;GRATING&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_group_id&quot;</span><span class="p">:</span><span class="s">&quot;GROUPID&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_instrument&quot;</span><span class="p">:</span><span class="s">&quot;INSTRUME&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_local_time&quot;</span><span class="p">:</span><span class="s">&quot;LT&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_mdf_row_id&quot;</span><span class="p">:</span><span class="s">&quot;MDFROW&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_nod_count&quot;</span><span class="p">:</span><span class="s">&quot;NODCOUNT&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_nod_pixels&quot;</span><span class="p">:</span><span class="s">&quot;NODPIX&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_non_linear_level&quot;</span><span class="p">:</span><span class="s">&quot;NONLINEA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_object&quot;</span><span class="p">:</span><span class="s">&quot;OBJECT&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_observation_class&quot;</span><span class="p">:</span><span class="s">&quot;OBSCLASS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_observation_epoch&quot;</span><span class="p">:</span><span class="s">&quot;OBSEPOCH&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_observation_id&quot;</span><span class="p">:</span><span class="s">&quot;OBSID&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_observation_type&quot;</span><span class="p">:</span><span class="s">&quot;OBSTYPE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_overscan_section&quot;</span><span class="p">:</span><span class="s">&quot;OVERSSEC&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_pixel_scale&quot;</span><span class="p">:</span><span class="s">&quot;PIXSCALE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_prism&quot;</span><span class="p">:</span><span class="s">&quot;PRISM&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_program_id&quot;</span><span class="p">:</span><span class="s">&quot;GEMPRGID&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_pupil_mask&quot;</span><span class="p">:</span><span class="s">&quot;PUPILMSK&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_qa_state&quot;</span><span class="p">:</span><span class="s">&quot;QASTATE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_ra&quot;</span><span class="p">:</span><span class="s">&quot;RA&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_raw_bg&quot;</span><span class="p">:</span><span class="s">&quot;RAWBG&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_raw_cc&quot;</span><span class="p">:</span><span class="s">&quot;RAWCC&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_raw_iq&quot;</span><span class="p">:</span> <span class="s">&quot;RAWIQ&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_raw_wv&quot;</span><span class="p">:</span><span class="s">&quot;RAWWV&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_read_mode&quot;</span><span class="p">:</span><span class="s">&quot;READMODE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_read_noise&quot;</span><span class="p">:</span><span class="s">&quot;RDNOISE&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_read_speed_setting&quot;</span><span class="p">:</span><span class="s">&quot;RDSPDSET&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_saturation_level&quot;</span><span class="p">:</span><span class="s">&quot;SATLEVEL&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_slit&quot;</span><span class="p">:</span><span class="s">&quot;SLIT&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_telescope&quot;</span><span class="p">:</span><span class="s">&quot;TELESCOP&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_ut_date&quot;</span><span class="p">:</span><span class="s">&quot;DATE-OBS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_ut_datetime&quot;</span><span class="p">:</span><span class="s">&quot;DATETIME&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_ut_time&quot;</span><span class="p">:</span><span class="s">&quot;UT&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_wavefront_sensor&quot;</span><span class="p">:</span><span class="s">&quot;WFS&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_wavelength_reference_pixel&quot;</span><span class="p">:</span><span class="s">&quot;WREFPIX&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_well_depth_setting&quot;</span><span class="p">:</span><span class="s">&quot;WELDEPTH&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_x_offset&quot;</span><span class="p">:</span><span class="s">&quot;XOFFSET&quot;</span><span class="p">,</span>
    <span class="s">&quot;key_y_offset&quot;</span><span class="p">:</span><span class="s">&quot;YOFFSET&quot;</span><span class="p">,</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="an-example-descriptor-function-from-gmos-descriptor-py">
<span id="appendix-descriptor"></span><h1>An Example Descriptor Function from <tt class="docutils literal"><span class="pre">GMOS_Descriptor.py</span></tt><a class="headerlink" href="#an-example-descriptor-function-from-gmos-descriptor-py" title="Permalink to this headline">Â¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">astrodata</span> <span class="kn">import</span> <span class="n">Errors</span>
<span class="kn">from</span> <span class="nn">StandardGMOSKeyDict</span> <span class="kn">import</span> <span class="n">stdkeyDictGMOS</span>
<span class="kn">from</span> <span class="nn">GEMINI_Descriptor</span> <span class="kn">import</span> <span class="n">GEMINI_DescriptorCalc</span>

<span class="k">class</span> <span class="nc">GMOS_DescriptorCalc</span><span class="p">(</span><span class="n">GEMINI_DescriptorCalc</span><span class="p">):</span>
    <span class="c"># Updating the global key dictionary with the local key dictionary</span>
    <span class="c"># associated with this descriptor class</span>
    <span class="n">_update_stdkey_dict</span> <span class="o">=</span> <span class="n">stdkeyDictGMOS</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GEMINI_DescriptorCalc</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">detector_x_bin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>

        <span class="c"># Since this descriptor function accesses keywords in the headers of</span>
        <span class="c"># the pixel data extensions, always return a dictionary where the key</span>
        <span class="c"># of the dictionary is an (EXTNAME, EXTVER) tuple.</span>
        <span class="n">ret_detector_x_bin</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># Loop over the science extensions in the dataset</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">[</span><span class="s">&quot;SCI&quot;</span><span class="p">]:</span>

            <span class="c"># Get the ccdsum value from the header of each pixel data</span>
            <span class="c"># extension. The ccdsum keyword is defined in the local key</span>
            <span class="c"># dictionary (stdkeyDictGMOS) but is read from the updated global</span>
            <span class="c"># key dictionary (self.get_descriptor_key())</span>
            <span class="n">ccdsum</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">get_key_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_descriptor_key</span><span class="p">(</span><span class="s">&quot;key_ccdsum&quot;</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">ccdsum</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># The get_key_value() function returns None if a value cannot</span>
                <span class="c"># be found and stores the exception info. Re-raise the</span>
                <span class="c"># exception. It will be dealt with by the CalculatorInterface</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="s">&quot;exception_info&quot;</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">ext</span><span class="o">.</span><span class="n">exception_info</span>

            <span class="n">detector_x_bin</span><span class="p">,</span> <span class="n">detector_y_bin</span> <span class="o">=</span> <span class="n">ccdsum</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

            <span class="c"># Return a dictionary with the binning of the x-axis integer as</span>
            <span class="c"># the value</span>
            <span class="n">ret_detector_x_bin</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="p">(</span><span class="n">ext</span><span class="o">.</span><span class="n">extname</span><span class="p">(),</span> <span class="n">ext</span><span class="o">.</span><span class="n">extver</span><span class="p">()):</span><span class="nb">int</span><span class="p">(</span><span class="n">detector_x_bin</span><span class="p">)})</span>

        <span class="k">if</span> <span class="n">ret_detector_x_bin</span> <span class="o">==</span> <span class="p">{}:</span>
            <span class="c"># If the dictionary is still empty, the AstroData object was not</span>
            <span class="c"># autmatically assigned a &quot;SCI&quot; extension and so the above for</span>
            <span class="c"># loop was not entered</span>
            <span class="k">raise</span> <span class="n">Errors</span><span class="o">.</span><span class="n">CorruptDataError</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">ret_detector_x_bin</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A Complete List of Available Descriptors</a></li>
<li><a class="reference internal" href="#mkcalculatorinterface-py"><tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt></a></li>
<li><a class="reference internal" href="#an-example-function-from-calculatorinterface-py">An Example Function from <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt></a></li>
<li><a class="reference internal" href="#standarddescriptorkeydict-py"><tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt></a></li>
<li><a class="reference internal" href="#an-example-descriptor-function-from-gmos-descriptor-py">An Example Descriptor Function from <tt class="docutils literal"><span class="pre">GMOS_Descriptor.py</span></tt></a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/appendix.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Descriptors 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Gemini Observatory.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>